<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>CatÃ¡logo de Productos</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

  <!-- Encabezado -->
  <header class="text-center py-4 bg-primary text-white">
    <h1>CatÃ¡logo de Productos - ANIMECRAFT</h1>
    <p>Explora nuestra variedad de artÃ­culos de anime</p>

    <!-- Botones -->
    <button class="btn btn-light me-2" data-bs-toggle="modal" data-bs-target="#modalCarrito">
      ðŸ›’ Carrito (<span id="contadorCarrito">0</span>)
    </button>
    <button class="btn btn-warning me-2" data-bs-toggle="modal" data-bs-target="#modalHistorial">
      ðŸ“œ Historial
    </button>
    <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#modalAgregar">
      âž• Agregar Producto
    </button>

    <!-- Buscador -->
    <div class="my-3 position-relative w-50 mx-auto">
      <input type="text" id="buscador" class="form-control" placeholder="Buscar producto...">
      <ul class="list-group position-absolute w-100" id="sugerencias" style="z-index: 1000;"></ul>
    </div>
  </header>

  <!-- CatÃ¡logo -->
  <section class="container my-5">
    <div class="row g-4" id="catalogo"></div>
  </section>

  <!-- Modal Carrito -->
  <div class="modal fade" id="modalCarrito" tabindex="-1">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Carrito de Compras</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <ul class="list-group" id="listaCarrito"></ul>
          <hr>
          <h5>Total: $<span id="totalCarrito">0.00</span></h5>
        </div>
        <div class="modal-footer">
          <button class="btn btn-success" id="btnPagar">Pagar</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal Historial -->
  <div class="modal fade" id="modalHistorial" tabindex="-1">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Historial de Compras</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <ul class="list-group" id="listaHistorial"></ul>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal Agregar Producto -->
  <div class="modal fade" id="modalAgregar" tabindex="-1">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Agregar Nuevo Producto</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <form id="formAgregar">
            <div class="mb-3">
              <label class="form-label">Nombre del producto</label>
              <input type="text" id="nombreProducto" class="form-control" required>
            </div>
            <div class="mb-3">
              <label class="form-label">Precio ($)</label>
              <input type="number" id="precioProducto" class="form-control" step="0.01" required>
            </div>
            <div class="mb-3">
              <label class="form-label">Imagen (desde tu computadora)</label>
              <input type="file" id="imagenProducto" class="form-control" accept="image/*" required>
            </div>
            <button type="submit" class="btn btn-success w-100">Agregar al CatÃ¡logo</button>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Pie -->
  <footer class="text-center py-4 bg-dark text-white">
    <p>Â© 2025 ANIMECRAFT - Todos los derechos reservados</p>
  </footer>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    // Productos con imÃ¡genes locales
    
  // Lista de productos con imÃ¡genes locales
  const productos = [
    { nombre: "Aluminio sublimado", precio: 25.99, img: "Aluminio sublimado.jpg" },
    { nombre: "Arte ICOPOR", precio: 22.50, img: "Arte ICOPOR.jpg" },
    { nombre: "Articulos anime", precio: 9.99, img: "Articulos anime.jpg" },
    { nombre: "Cajs sorpreza", precio: 18.75, img: "Cajs sorpreza.jpg" },
    { nombre: "Camisas anime", precio: 4.50, img: "Camisas anime.jpg" },
    { nombre: "Carpa sublimada", precio: 22.50, img: "Carpa sublimada.jpg" },
    { nombre: "Ceramica sublimada", precio: 9.99, img: "Ceramica sublimada.jpg" },
    { nombre: "Con palillos", precio: 18.75, img: "Con palillos.jpg" },
    { nombre: "Cuarto musica", precio: 4.50, img: "Cuarto musica.jpg" },
    { nombre: "Data show alquiler", precio: 25.99, img: "Data show alquiler.jpg" },
    { nombre: "Decoracion Haloween", precio: 22.50, img: "Decoracion Haloween.jpg" },
    { nombre: "Decoracion Navidad", precio: 9.99, img: "Decoracion Navidad.jpg" },
    { nombre: "Disfraz Alquiler", precio: 18.75, img: "Disfraz Alquiler.jpg" },
    { nombre: "Estampado en tela", precio: 4.50, img: "Estampado en tela.jpg" },
    { nombre: "Estampado", precio: 22.50, img: "Estampado.jpg" },
    { nombre: "Figuras anime", precio: 9.99, img: "Figuras anime.jpg" },
    { nombre: "Gorras sublimadas", precio: 18.75, img: "Gorras sublimadas.jpg" },
    { nombre: "Grabado lacer", precio: 4.50, img: "Grabado lacer.jpg" },
    { nombre: "HD print", precio: 22.50, img: "HD print.jpg" },
    { nombre: "Llaveros perzonalizados", precio: 9.99, img: "Llaveros perzonalizados.jpg" },
    { nombre: "Mangas y Comics", precio: 18.75, img: "Mangas y Comics.jpg" },
    { nombre: "Mascaras personalizadas", precio: 4.50, img: "Mascaras personalizadas.jpg" },
    { nombre: "Monografias", precio: 22.50, img: "Monografias.jpg" },
    { nombre: "Murales escolares", precio: 9.99, img: "Murales escolares.jpg" },
    { nombre: "Neon cuadro", precio: 18.75, img: "Neon cuadro.jpg" },
    { nombre: "Paper cfraft", precio: 4.50, img: "Paper cfraft.jpg" },
    { nombre: "Perfumenes hombre", precio: 22.50, img: "Perfumenes hombre.jpg" },
    { nombre: "Perfumenes mujeres", precio: 9.99, img: "Perfumenes mujeres.jpg" },
    { nombre: "Poroplast personalizado", precio: 18.75, img: "Poroplast personalizado.jpg" },
    { nombre: "Postres emprendedores escolares", precio: 4.50, img: "Postres emprendedores escolares.jpg" },
    { nombre: "Pulceras perzonalizadas", precio: 22.50, img: "Pulceras perzonalizadas.jpg" },
    { nombre: "Ramo personalizado", precio: 9.99, img: "Ramo personalizado.jpg" },
    { nombre: "Sublimacion", precio: 18.75, img: "Sublimacion.jpg" },
    
    

  ];

    let carrito = [];
    let historial = [];

    const catalogo = document.getElementById("catalogo");

    function generarCatalogo() {
      catalogo.innerHTML = "";
      productos.forEach((p, i) => {
        const card = document.createElement("div");
        card.className = "col-md-3";
        card.innerHTML = `
          <div class="card h-100 shadow-sm">
            <img src="${p.img}" class="card-img-top" alt="${p.nombre}">
            <div class="card-body text-center">
              <h5>${p.nombre}</h5>
              <p>$${p.precio.toFixed(2)}</p>
              <button class="btn btn-primary" onclick="agregarCarrito(${i})">Agregar</button>
            </div>
          </div>
        `;
        catalogo.appendChild(card);
      });
    }
    generarCatalogo();

    // Agregar al carrito
    function agregarCarrito(i) {
      carrito.push(productos[i]);
      actualizarCarrito();
    }

    function actualizarCarrito() {
      const lista = document.getElementById("listaCarrito");
      lista.innerHTML = "";
      carrito.forEach((p, i) => {
        const item = document.createElement("li");
        item.className = "list-group-item d-flex justify-content-between align-items-center";
        item.textContent = `${p.nombre} - $${p.precio.toFixed(2)}`;
        const btn = document.createElement("button");
        btn.className = "btn btn-danger btn-sm";
        btn.textContent = "Eliminar";
        btn.onclick = () => { carrito.splice(i, 1); actualizarCarrito(); };
        item.appendChild(btn);
        lista.appendChild(item);
      });
      document.getElementById("contadorCarrito").textContent = carrito.length;
      document.getElementById("totalCarrito").textContent = carrito.reduce((t,p)=>t+p.precio,0).toFixed(2);
    }

    // Pago
    document.getElementById("btnPagar").onclick = () => {
      if (carrito.length === 0) return alert("El carrito estÃ¡ vacÃ­o.");
      historial.push(...carrito);
      carrito = [];
      actualizarCarrito();
      mostrarHistorial();
      alert("Compra realizada con Ã©xito ðŸŽ‰");
    };

    function mostrarHistorial() {
      const lista = document.getElementById("listaHistorial");
      lista.innerHTML = "";
      historial.forEach(p => {
        const li = document.createElement("li");
        li.className = "list-group-item";
        li.textContent = `${p.nombre} - $${p.precio.toFixed(2)}`;
        lista.appendChild(li);
      });
    }

    // Buscador autocompletado
    const buscador = document.getElementById("buscador");
    const sugerencias = document.getElementById("sugerencias");

    buscador.addEventListener("input", () => {
      const texto = buscador.value.toLowerCase();
      sugerencias.innerHTML = "";
      if (texto) {
        productos.filter(p => p.nombre.toLowerCase().includes(texto)).forEach(p => {
          const li = document.createElement("li");
          li.className = "list-group-item";
          li.textContent = p.nombre;
          li.onclick = () => { buscador.value = p.nombre; sugerencias.innerHTML = ""; };
          sugerencias.appendChild(li);
        });
      }
    });

    // Agregar nuevo producto manualmente (con imagen desde la PC)
    const formAgregar = document.getElementById("formAgregar");
    formAgregar.addEventListener("submit", e => {
      e.preventDefault();

      const nombre = document.getElementById("nombreProducto").value;
      const precio = parseFloat(document.getElementById("precioProducto").value);
      const imagenInput = document.getElementById("imagenProducto");
      const archivo = imagenInput.files[0];

      if (!archivo) return alert("Selecciona una imagen.");

      const lector = new FileReader();
      lector.onload = function(e) {
        const nuevaImg = e.target.result; // base64
        productos.push({ nombre, precio, img: nuevaImg });
        generarCatalogo();
        formAgregar.reset();
        const modal = bootstrap.Modal.getInstance(document.getElementById("modalAgregar"));
        modal.hide();
        alert("Producto agregado con Ã©xito âœ…");
      };
      lector.readAsDataURL(archivo);
    });
  </script>
</body>
</html>
